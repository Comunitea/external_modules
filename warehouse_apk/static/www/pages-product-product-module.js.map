{"version":3,"sources":["./src/app/components/product-quant-list/product-quant-list.component.html","./src/app/pages/product/product.page.html","./src/app/components/product-quant-list/product-quant-list.component.scss","./src/app/components/product-quant-list/product-quant-list.component.ts","./src/app/pages/product/product.module.ts","./src/app/pages/product/product.page.scss","./src/app/pages/product/product.page.ts"],"names":[],"mappings":"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","file":"pages-product-product-module.js","sourcesContent":["export default \"<ion-grid>\\n  <ion-row>\\n    <ion-col size=\\\"8\\\">\\n        <div><strong>Ubicación</strong></div>\\n    </ion-col>\\n    \\n    <ion-col size=\\\"2\\\">\\n        <div><strong>Reservado</strong></div>\\n    </ion-col>\\n\\n    <ion-col size=\\\"2\\\">\\n      <div><strong>A mano</strong></div>\\n    </ion-col>\\n  </ion-row>\\n  <ion-row *ngFor=\\\"let quant of quants\\\">\\n      <ion-col size-xs=\\\"12\\\" size-sm=\\\"8\\\" size=\\\"8\\\">\\n      <div class=\\\"product_link\\\" (click)=\\\"open_link(quant.location_id[0])\\\">{{quant.location_id[1]}}</div>\\n    </ion-col>\\n    \\n    <ion-col size-xs=\\\"6\\\" size-sm=\\\"2\\\" size=\\\"2\\\">\\n      <div><strong class=\\\"ion-hide-sm-up\\\">Reservado: </strong>{{quant.reserved_quantity}}</div>\\n    </ion-col>\\n    \\n    <ion-col size-xs=\\\"6\\\" size-sm=\\\"2\\\" size=\\\"2\\\">\\n      <div [ngClass]=\\\"{'danger': quant.quantity &lt;= 0}\\\"><strong class=\\\"ion-hide-sm-up\\\">A mano: </strong>{{quant.quantity}}</div>\\n    </ion-col>\\n  </ion-row>\\n</ion-grid>\";","export default \"<ion-header>\\n  <ion-toolbar>\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-menu-button></ion-menu-button>\\n    </ion-buttons>\\n    <app-scanner-header [disabled_reader]=\\\"true\\\" slot=\\\"end\\\"></app-scanner-header>\\n    <ion-title>Detalles del producto</ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content>\\n  <ion-card *ngIf=\\\"product_data\\\">\\n    <ion-card-header>\\n      <ion-card-title>{{product_data.display_name}}</ion-card-title>\\n    </ion-card-header>\\n\\n    <ion-card-content>\\n      <div class=\\\"product_img\\\">\\n      <ion-img *ngIf=\\\"product_data.base64\\\" src=\\\"data:image/jpeg;base64,{{ product_data['image_medium'] }}\\\"></ion-img>\\n      <ion-img *ngIf=\\\"!product_data.base64\\\" src=\\\"{{ product_data['image_medium'] }}\\\"></ion-img>\\n      <ion-label *ngIf=\\\"product_data.description_short\\\">{{product_data.description_short}}</ion-label>\\n      </div>\\n      <div><strong>Categoría: </strong>{{product_data.categ_id[1]}}</div>\\n      <div><strong>Referencia: </strong>{{product_data.default_code}}</div>\\n      <div *ngIf=\\\"product_data.barcode\\\"><strong>Codigo de barras: </strong>{{product_data.barcode}}</div>\\n      <div><strong>Precio de venta: </strong>{{product_data.list_price}}€</div>\\n      <div><strong>Precio de compra: </strong>{{product_data.standard_price}}€</div>\\n      <div [ngClass]=\\\"{'danger': product_data.qty_available &lt;= 0}\\\"><strong>A mano: </strong>{{product_data.qty_available}}</div>\\n      <div [ngClass]=\\\"{'danger': product_data.virtual_available &lt;= 0}\\\"><strong>Previsto: </strong>{{product_data.virtual_available}}</div>\\n    </ion-card-content>\\n  </ion-card>\\n\\n  <app-product-quant-list [quants]=\\\"quants\\\"></app-product-quant-list>\\n  \\n  <ion-infinite-scroll threshold=\\\"100px\\\" (ionInfinite)=\\\"loadData($event)\\\">\\n    <ion-infinite-scroll-content\\n      loadingSpinner=\\\"bubbles\\\"\\n      loadingText=\\\"Cargando más localizaciones...\\\">\\n    </ion-infinite-scroll-content>\\n  </ion-infinite-scroll>\\n</ion-content>\";","export default \"div.danger {\\n  color: var(--ion-color-danger);\\n}\\ndiv.product_link {\\n  color: blue;\\n  text-decoration: underline;\\n  -webkit-text-decoration-color: blue;\\n          text-decoration-color: blue;\\n  cursor: pointer;\\n}\\n/* Medias */\\n@media screen and (max-width: 576px) {\\n  ion-grid > ion-row:first-child {\\n    display: none;\\n  }\\n\\n  ion-grid > ion-row {\\n    border: 1px black solid;\\n  }\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL2tpa28vaW9uaWM0L3dhcmVob3VzZV9tYW5hZ2VyX2Fwa18xMS9zcmMvYXBwL2NvbXBvbmVudHMvcHJvZHVjdC1xdWFudC1saXN0L3Byb2R1Y3QtcXVhbnQtbGlzdC5jb21wb25lbnQuc2NzcyIsInNyYy9hcHAvY29tcG9uZW50cy9wcm9kdWN0LXF1YW50LWxpc3QvcHJvZHVjdC1xdWFudC1saXN0LmNvbXBvbmVudC5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUNJO0VBQ0ksOEJBQUE7QUNBUjtBREVJO0VBQ0ksV0FBQTtFQUNBLDBCQUFBO0VBQ0EsbUNBQUE7VUFBQSwyQkFBQTtFQUNBLGVBQUE7QUNBUjtBRElBLFdBQUE7QUFDQTtFQUNJO0lBQ0ksYUFBQTtFQ0ROOztFREdFO0lBQ0ksdUJBQUE7RUNBTjtBQUNGIiwiZmlsZSI6InNyYy9hcHAvY29tcG9uZW50cy9wcm9kdWN0LXF1YW50LWxpc3QvcHJvZHVjdC1xdWFudC1saXN0LmNvbXBvbmVudC5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiZGl2IHtcbiAgICAmLmRhbmdlciB7XG4gICAgICAgIGNvbG9yOiB2YXIoLS1pb24tY29sb3ItZGFuZ2VyKTtcbiAgICB9XG4gICAgJi5wcm9kdWN0X2xpbmsge1xuICAgICAgICBjb2xvcjogYmx1ZTtcbiAgICAgICAgdGV4dC1kZWNvcmF0aW9uOiB1bmRlcmxpbmU7XG4gICAgICAgIHRleHQtZGVjb3JhdGlvbi1jb2xvcjogYmx1ZTtcbiAgICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgIH1cbn1cblxuLyogTWVkaWFzICovXG5AbWVkaWEgc2NyZWVuIGFuZCAobWF4LXdpZHRoOiA1NzZweCkge1xuICAgIGlvbi1ncmlkID4gaW9uLXJvdzpmaXJzdC1jaGlsZCB7XG4gICAgICAgIGRpc3BsYXk6IG5vbmU7XG4gICAgfVxuICAgIGlvbi1ncmlkID4gaW9uLXJvdyB7XG4gICAgICAgIGJvcmRlcjogMXB4IGJsYWNrIHNvbGlkO1xuICAgIH1cbn0iLCJkaXYuZGFuZ2VyIHtcbiAgY29sb3I6IHZhcigtLWlvbi1jb2xvci1kYW5nZXIpO1xufVxuZGl2LnByb2R1Y3RfbGluayB7XG4gIGNvbG9yOiBibHVlO1xuICB0ZXh0LWRlY29yYXRpb246IHVuZGVybGluZTtcbiAgdGV4dC1kZWNvcmF0aW9uLWNvbG9yOiBibHVlO1xuICBjdXJzb3I6IHBvaW50ZXI7XG59XG5cbi8qIE1lZGlhcyAqL1xuQG1lZGlhIHNjcmVlbiBhbmQgKG1heC13aWR0aDogNTc2cHgpIHtcbiAgaW9uLWdyaWQgPiBpb24tcm93OmZpcnN0LWNoaWxkIHtcbiAgICBkaXNwbGF5OiBub25lO1xuICB9XG5cbiAgaW9uLWdyaWQgPiBpb24tcm93IHtcbiAgICBib3JkZXI6IDFweCBibGFjayBzb2xpZDtcbiAgfVxufSJdfQ== */\";","import { Component, OnInit, Input } from '@angular/core';\nimport { Router } from '@angular/router';\n\n@Component({\n  selector: 'app-product-quant-list',\n  templateUrl: './product-quant-list.component.html',\n  styleUrls: ['./product-quant-list.component.scss'],\n})\nexport class ProductQuantListComponent implements OnInit {\n\n  @Input() quants: {}\n\n  constructor(public router: Router) { }\n\n  ngOnInit() {}\n\n  open_link(location_id){\n    this.router.navigateByUrl('/stock-location/'+location_id);\n  }\n\n}\n\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { ProductPage } from './product.page';\nimport { ProductQuantListComponent } from '../../components/product-quant-list/product-quant-list.component';\n\nimport { SharedModule } from '../../shared/shared.module';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: ProductPage\n  }\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    RouterModule.forChild(routes),\n    SharedModule\n  ],\n  entryComponents: [],\n  declarations: [ProductPage, ProductQuantListComponent]\n})\nexport class ProductPageModule {}\n","export default \"div.danger {\\n  color: var(--ion-color-danger);\\n}\\ndiv.product_img ion-img {\\n  max-width: 100px;\\n  max-height: 100px;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL2tpa28vaW9uaWM0L3dhcmVob3VzZV9tYW5hZ2VyX2Fwa18xMS9zcmMvYXBwL3BhZ2VzL3Byb2R1Y3QvcHJvZHVjdC5wYWdlLnNjc3MiLCJzcmMvYXBwL3BhZ2VzL3Byb2R1Y3QvcHJvZHVjdC5wYWdlLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQ0k7RUFDSSw4QkFBQTtBQ0FSO0FER1E7RUFDSSxnQkFBQTtFQUNBLGlCQUFBO0FDRFoiLCJmaWxlIjoic3JjL2FwcC9wYWdlcy9wcm9kdWN0L3Byb2R1Y3QucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiZGl2IHtcbiAgICAmLmRhbmdlciB7XG4gICAgICAgIGNvbG9yOiB2YXIoLS1pb24tY29sb3ItZGFuZ2VyKTtcbiAgICB9XG4gICAgJi5wcm9kdWN0X2ltZyB7XG4gICAgICAgIGlvbi1pbWcge1xuICAgICAgICAgICAgbWF4LXdpZHRoOiAxMDBweDtcbiAgICAgICAgICAgIG1heC1oZWlnaHQ6IDEwMHB4O1xuICAgICAgICB9XG4gICAgfVxufSIsImRpdi5kYW5nZXIge1xuICBjb2xvcjogdmFyKC0taW9uLWNvbG9yLWRhbmdlcik7XG59XG5kaXYucHJvZHVjdF9pbWcgaW9uLWltZyB7XG4gIG1heC13aWR0aDogMTAwcHg7XG4gIG1heC1oZWlnaHQ6IDEwMHB4O1xufSJdfQ== */\";","import { Component, OnInit, ViewChild } from '@angular/core';\nimport { Router, ActivatedRoute } from '@angular/router';\nimport { Storage } from '@ionic/storage';\nimport { AlertController, IonInfiniteScroll } from '@ionic/angular';\nimport { OdooService } from '../../services/odoo.service';\nimport { AudioService } from '../../services/audio.service';\nimport { StockService } from '../../services/stock.service';\n\n@Component({\n  selector: 'app-product',\n  templateUrl: './product.page.html',\n  styleUrls: ['./product.page.scss'],\n})\nexport class ProductPage implements OnInit {\n\n  @ViewChild(IonInfiniteScroll, {static:false}) infiniteScroll: IonInfiniteScroll;\n\n  offset: number;\n  limit: number;\n  limit_reached: boolean;\n  quants: {};\n  location_ids: boolean;\n\n  product_data: {};\n  placeholder: string;\n\n  constructor(\n    private odoo: OdooService,\n    public router: Router,\n    public alertCtrl: AlertController,\n    private route: ActivatedRoute,\n    private audio: AudioService,\n    private stock: StockService,\n    private storage: Storage,\n  ) {\n    this.offset = 0;\n    this.limit = 25;\n    this.limit_reached = false;\n  }\n\n  ngOnInit() {\n    this.odoo.isLoggedIn().then((data)=>{\n      if (data==false) {\n        this.router.navigateByUrl('/login');\n      } else {\n        this.storage.get('CONEXION').then((con) => {\n          this.placeholder = con.url + \"/web/static/src/img/placeholder.png\"\n        })\n        .catch((error)=>{\n          this.presentAlert('Error al comprobar tu sesión:', error);\n        });\n        var product = this.route.snapshot.paramMap.get('id');\n        this.get_product_info(product);\n      }\n    })\n    .catch((error)=>{\n      this.presentAlert('Error al comprobar tu sesión:', error);\n    });\n  }\n\n  async presentAlert(titulo, texto) {\n    this.audio.play('error');\n    const alert = await this.alertCtrl.create({\n        header: titulo,\n        subHeader: texto,\n        buttons: ['Ok']\n    });\n    await alert.present();\n  }\n\n  get_product_info(product) {\n    console.log(product);\n    this.stock.get_product_info(product).then((data)=>{\n      if (data[0]['image_medium']==false){\n        data[0]['base64'] = false;\n        data[0]['image_medium'] = this.placeholder;\n      } else {\n        data[0]['base64'] = true;\n      }\n      this.product_data = data[0];  \n      this.audio.play('click');\n      console.log(\"QUANTS\");\n      console.log(this.product_data);\n      console.log(this.product_data['stock_quant_ids']);\n      this.quants = this.product_data['stock_quant_ids'];\n      /* this.get_location_quants(this.product_data['default_code']); */\n    })\n    .catch((error)=>{\n      this.presentAlert('Error al recuperar el picking:', error);\n    });\n  }\n\n  get_location_quants(search=null){\n    this.offset = 0;\n    this.limit_reached = false;\n    this.stock.get_location_quants(null, this.offset, this.limit, search, 'form').then((quants_list:Array<{}>)=> {\n      this.quants = quants_list;\n      console.log(this.quants);\n      if(Object.keys(quants_list).length < 25){\n        this.limit_reached = true;\n      }\n      this.audio.play('click');\n    })\n    .catch((error) => {\n      this.presentAlert('Error al recuperador el listado de stock:', error);\n    });\n  }\n\n  // Infinitescroll\n\n  loadData(event) {\n    setTimeout(() => {\n      console.log('Loading more locations');\n      event.target.complete();\n      this.quant_list_infinite_scroll_add();\n\n      // App logic to determine if all data is loaded\n      // and disable the infinite scroll\n      if (this.limit_reached) {\n        event.target.disabled = true;\n      }\n    }, 500);\n  }\n\n  quant_list_infinite_scroll_add(){\n    this.offset += this.limit;\n    this.stock.get_location_quants(null, this.offset, this.limit, this.product_data['default_code'], 'form').then((data:Array<{}>)=> {\n      let current_length = Object.keys(this.quants).length;\n      if(Object.keys(data).length < 25){\n        this.limit_reached = true;\n      }\n      for(var k in data) this.quants[current_length+Number(k)]=data[k];\n    })\n    .catch((error) => {\n      this.presentAlert('Error al recuperador el listado de stock:', error);\n    });\n  }\n\n  toggleInfiniteScroll() {\n    this.infiniteScroll.disabled = !this.infiniteScroll.disabled;\n  }\n\n}\n"],"sourceRoot":"webpack:///"}